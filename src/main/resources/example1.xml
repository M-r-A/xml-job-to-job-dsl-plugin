<?xml version="1.0" encoding="UTF-8"?>
<project>
    <actions/>
    <description/>
    <keepDependencies>false</keepDependencies>
    <properties>
        <hudson.plugins.buildblocker.BuildBlockerProperty>
            <useBuildBlocker>true</useBuildBlocker>
            <blockingJobs>Build-iOS-App
                Build-Android-App
                Run-iOS-Tests
                Run-Android-Tests
            </blockingJobs>
            <blockLevel>GLOBAL</blockLevel>
            <scanQueueFor>DISABLED</scanQueueFor>
        </hudson.plugins.buildblocker.BuildBlockerProperty>
        <hudson.model.ParametersDefinitionProperty>
            <parameterDefinitions>
                <hudson.model.StringParameterDefinition>
                    <name>GIT_BRANCH</name>
                    <defaultValue>dev</defaultValue>
                    <description>Name of the branch that will be checked out from SymphonyOSF/iOSTest Repo</description>
                </hudson.model.StringParameterDefinition>
                <hudson.model.StringParameterDefinition>
                    <name>SELECTED_BINARY</name>
                    <defaultValue>none</defaultValue>
                    <description>Local path of binary to run the tests against</description>
                </hudson.model.StringParameterDefinition>
                <hudson.model.BooleanParameterDefinition>
                    <name>REAL_DEVICE</name>
                    <defaultValue>false</defaultValue>
                    <description>Check this if you want to run on a plugged in device instead of the simulator
                        Make sure only one device is plugged.
                        UDID will be automatically fetched</description>
                </hudson.model.BooleanParameterDefinition>
                choiceParam('PLATFORM', ['Android', 'iOS'], 'Select the platform to test')
                <hudson.model.ChoiceParameterDefinition>
                    <choices class="java.util.Arrays$ArrayList">
                        <a class="string-array">
                            <string>Android</string>
                            <string>iOS</string>
                        </a>
                    </choices>
                    <name>PLATFORM</name>
                    <description>Select the platform to test</description>
                </hudson.model.ChoiceParameterDefinition>
            </parameterDefinitions>
        </hudson.model.ParametersDefinitionProperty>
        <com.coravy.hudson.plugins.github.GithubProjectProperty>
            <projectUrl>https://github.com/alandoni/xml-job-to-dsl/</projectUrl>
        </com.coravy.hudson.plugins.github.GithubProjectProperty>
    </properties>
    <canRoam>true</canRoam>
    <disabled>true</disabled>
    <blockBuildWhenDownstreamBuilding>false</blockBuildWhenDownstreamBuilding>
    <blockBuildWhenUpstreamBuilding>false</blockBuildWhenUpstreamBuilding>
    <triggers/>
    <concurrentBuild>false</concurrentBuild>
    <builders>
        <org.jenkinsci.plugins.buildnameupdater.BuildNameUpdater plugin="build-name-setter@1.6.5">
            <macroTemplate>Build App</macroTemplate>
            <fromFile>false</fromFile>
            <fromMacro>true</fromMacro>
            <macroFirst>true</macroFirst>
        </org.jenkinsci.plugins.buildnameupdater.BuildNameUpdater>
        <hudson.tasks.Shell>
            <command>export PLATFORM=iOS
                cd 'xml-job-to-dsl/src/scripts/'
                ./run.sh
            </command>
        </hudson.tasks.Shell>
    </builders>
    <publishers>
        <hudson.tasks.ArtifactArchiver>
            <artifacts>build/**/*</artifacts>
            <allowEmptyArchive>false</allowEmptyArchive>
            <defaultExcludes>true</defaultExcludes>
            <fingerprint>false</fingerprint>
            <onlyIfSuccessful>false</onlyIfSuccessful>
        </hudson.tasks.ArtifactArchiver>
        <org.korosoft.jenkins.plugin.rtp.RichTextPublisher plugin="rich-text-publisher-plugin@1.4">
            <stableText>${FILE:xml-job-to-dsl/tests_report.html}
                ${FILE:build_variables.html}</stableText>
            <unstableText/>
            <failedText/>
            <abortedText/>
            <nullAction/>
            <unstableAsStable>true</unstableAsStable>
            <failedAsStable>true</failedAsStable>
            <abortedAsStable>true</abortedAsStable>
            <parserName>HTML</parserName>
        </org.korosoft.jenkins.plugin.rtp.RichTextPublisher>
    </publishers>
    <buildWrappers>
        <org.jenkinsci.plugins.credentialsbinding.impl.SecretBuildWrapper>
            <bindings>
                <org.jenkinsci.plugins.credentialsbinding.impl.StringBinding>
                    <variable>PASSWORD</variable>
                    <credentialsId>${PASS_WORD}</credentialsId>
                </org.jenkinsci.plugins.credentialsbinding.impl.StringBinding>
            </bindings>
        </org.jenkinsci.plugins.credentialsbinding.impl.SecretBuildWrapper>
    </buildWrappers>
    <logRotator>
        <daysToKeep>50</daysToKeep>
        <numToKeep>-1</numToKeep>
        <artifactDaysToKeep>-1</artifactDaysToKeep>
        <artifactNumToKeep>-1</artifactNumToKeep>
    </logRotator>
    <scm class="hudson.plugins.git.GitSCM">
        <userRemoteConfigs>
            <hudson.plugins.git.UserRemoteConfig>
                <url>https://github.com/alandoni/xml-job-to-dsl</url>
                <credentialsId>jenkins</credentialsId>
            </hudson.plugins.git.UserRemoteConfig>
        </userRemoteConfigs>
        <branches>
            <hudson.plugins.git.BranchSpec>
                <name>*/${GIT_BRANCH}</name>
            </hudson.plugins.git.BranchSpec>
        </branches>
        <configVersion>2</configVersion>
        <doGenerateSubmoduleConfigurations>false</doGenerateSubmoduleConfigurations>
        <gitTool>Default</gitTool>
        <extensions>
            <hudson.plugins.git.extensions.impl.WipeWorkspace/>
        </extensions>
        <browser class="hudson.plugins.git.browser.GithubWeb">
            <url>https://github.com/alandoni/xml-job-to-dsl</url>
        </browser>
    </scm>
</project>